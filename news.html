<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>News - Goodway Sacco Society</title>
    <link rel="stylesheet" href="shared-styles.css" />
    <link rel="stylesheet" href="news.css" />
    <!-- Include Shared Scripts -->
    <script src="shared-scripts.js"></script>

    <script>
        // Fetch and render careers dynamically
        async function loadCareers() {
            try {
                const response = await fetch('http://localhost:3001/api/jobs');
                if (!response.ok) {
                    throw new Error('Failed to load careers');
                }
                const careers = await response.json();
                const careersList = document.getElementById('careers-list');
                careersList.innerHTML = '';
                careers.forEach(item => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.href = 'job-application.html?jobId=' + item.id;
                    a.textContent = item.title;
                    li.appendChild(a);
                    careersList.appendChild(li);
                });
            } catch (error) {
                console.error('Error loading careers:', error);
            }
        }

        // Fetch and render news dynamically
        async function loadNews() {
            try {
                const response = await fetch('http://localhost:3001/api/news');
                if (!response.ok) {
                    throw new Error('Failed to load news');
                }
                const newsItems = await response.json();
                const newsList = document.getElementById('news-list');
                newsList.innerHTML = '';
                newsItems.forEach(item => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.href = 'news-details.html?id=' + item.id;
                    a.textContent = item.title;
                    li.appendChild(a);
                    newsList.appendChild(li);
                });
            } catch (error) {
                console.error('Error loading news:', error);
            }
        }

        // Fetch and render updates dynamically
        async function loadUpdates() {
            try {
                // For demo, static data; replace with API if available
                const updates = [
                    { id: 1, title: 'New online portal for easier account management', url: 'portal.html' },
                    { id: 2, title: 'Changes in loan application procedures', url: 'loan-changes.html' },
                    { id: 3, title: 'Holiday schedule for the upcoming festive season', url: 'holiday-schedule.html' }
                ];
                const updatesList = document.getElementById('updates-list');
                updatesList.innerHTML = '';
                updates.forEach(item => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.href = item.url;
                    a.textContent = item.title;
                    li.appendChild(a);
                    updatesList.appendChild(li);
                });
            } catch (error) {
                console.error('Error loading updates:', error);
            }
        }

        window.onload = function() {
            loadCareers();
            loadNews();
            loadUpdates();
        }
    </script>

</head>
<body>
    <!-- Include Shared Header -->
    <div id="shared-header"></div>
    <script>
        // Shared content will be loaded automatically by shared-scripts.js
        // No need for manual loading - the enhanced shared-scripts.js handles everything
    </script>

    <main>
        <h2>Goodway Sacco Society</h2>
        <p>Stay informed with the latest developments, announcements, and opportunities at Goodway Sacco Society. We are committed to keeping our members up-to-date and engaged.</p>

        <div class="tabs">
            <button class="tab-button active" onclick="showTab('careers')">Careers</button>
            <button class="tab-button" onclick="showTab('news')">News & Updates</button>
        </div>

        <section id="careers" class="tab-content">
            <h3>Careers</h3>
            <ul id="careers-list">
                <!-- Careers and internships will be dynamically loaded here -->
            </ul>
        </section>

        <section id="news" class="tab-content">
            <h3>News & Updates</h3>
            <ul id="news-list">
                <!-- News and updates will be dynamically loaded here -->
            </ul>
        </section>
    </main>

    <!-- Professional Footer -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <h3>Goodway Sacco Society</h3>
                        <p>Your trusted financial partner since 2007</p>
                    </div>
                    <div class="footer-contact">
                        <h4>Contact Information</h4>
                        <p><strong>Email:</strong> <a href="mailto:info@goodwaysacco.co.ke">info@goodwaysacco.co.ke</a></p>
                        <p><strong>Phone:</strong> <a href="tel:+254795734561">(254) 795-734-561</a></p>
                        <p><strong>USSD:</strong> <span class="ussd-code">*667*2#</span></p>
                    </div>
                </div>

                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul class="footer-links">
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="services.html">Our Services</a></li>
                        <li><a href="loans.html">Loan Products</a></li>
                        <li><a href="savings.html">Savings Plans</a></li>
                        <li><a href="membership.html">Membership</a></li>
                        <li><a href="news.html">Latest News</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Services</h4>
                    <ul class="footer-links">
                        <li><a href="loans.html">Personal Loans</a></li>
                        <li><a href="businessloan.html">Business Loans</a></li>
                        <li><a href="savings.html">Savings Accounts</a></li>
                        <li><a href="services.html">Mobile Banking</a></li>
                        <li><a href="services.html">Insurance</a></li>
                        <li><a href="contact.html">Customer Support</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Legal</h4>
                    <ul class="footer-links">
                        <li><a href="terms.html">Terms & Conditions</a></li>
                        <li><a href="contact.html">Privacy Policy</a></li>
                        <li><a href="about.html">Regulatory Information</a></li>
                        <li><a href="contact.html">Complaints Procedure</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <p>&copy; 2025 Goodway Sacco Society. All rights reserved. | Licensed and regulated by SASRA.</p>
                    <p class="footer-disclaimer">
                        Goodway Sacco Society is committed to empowering our members through innovative financial solutions and exceptional service.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        function showTab(tabId) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.style.display = (tab.id === tabId) ? 'block' : 'none';
            });
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => {
                button.classList.toggle('active', button.textContent.toLowerCase().includes(tabId));
            });
        }
    </script>
</body>
</html>
